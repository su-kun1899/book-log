# プロフェッショナルIPv6

## 序文

- IPv4は数に制約があった
- IPv6自体は昔からあった
- 2011年に在庫が枯渇したことにより普及が加速する
  - Appleがアプリの審査基準に入れたことも大きい

### 混ざりつつも、似て非なるプロトコル

- IPv6の特徴は128ビットで表現されること
  - IPv4は32ビットなので2の96乗倍
- 似ている部分もあるが、直接の互換性はない
- 違うものなのに並行運用されるのでややこしくなる

## 第Ⅰ部 本書を読むにあたっての前提知識

### 第1章 インターネット概要

- IPv6はインターネットプロトコルのバージョン6
- IPv6はIPv4のアドレス在庫枯渇が背景にある
  - IPv4は2の32乗(約43億)
- CIDRやNATはアドレス枯渇を遅らせる方法として考案された

#### 🤔 CIDR

- IPアドレスにはネットワーク部とホスト部がある
- IPv4だとIPアドレスは4つのオクテットで表現される(XXX.XXX.XXX.XXX)
  - 1オクテットは8ビット（2進数8桁）
- グローバルIPだとネットワーク規模でネットワーク部を決めていた
  - ネットワーク部の表現をネットマスクと呼ぶ
  - クラスは最初の数字で判別する
    - 「0XXXXXXX」ならクラスA
    - 「10XXXXXX」ならクラスB
    - 「110XXXXX」ならクラスC
  - クラスAだと第1オクテットがネットワーク部、ホストは2の24乗？
    - 255.0.0.0がネットマスク（/255.0.0.0もしくは/8）
- CIDRはアドレス部を自由に決める方法
  - ネットワーク部分を表現するにはサブネットを使う（192.168.0.5/255.255.255.0）
    - サブネットマスク
  - ビット数で表現してもよい（192.168.0.5/24）
  - 2進数の24桁分がネットワーク部ということ
- [サブネットマスクの計算をマスターする](http://www.atmarkit.co.jp/ait/articles/0805/15/news134.html)
- [アドレス・クラスとさまざまなIPアドレス](http://www.atmarkit.co.jp/ait/articles/0301/17/news003.html)

#### 🤔 NAT

- Network Address Translation
- 内部ネットワークからインターネットに出る際にプライベートIPをグローバルIPに変換する

### 1.1 IPはパケット交換技術

- インターネットはパケット単位で通信する
- パケットはデータを小分けにする
- 複数の通信を一つの回線で行えるので効率が良い

### 1.1.1 IPパケットのフォーマット

- ヘッダとペイロードがある
- ペイロードが送るデータ
- 実際はバイト列
- バイト列の並べ方をベイトオーダー、並べ方の種類をエンディアンと呼ぶ
- ビッグエンディアンとリトルエンディアン
  - 大きい順と小さい順
- TCP/IPでは事実上ビッグエンディアンに統一されている
  - ネットワークバイトオーダーと呼ぶ(コンピュータ内でのエンディアンはホストバイトオーダー)

### 1.1.2 IPパケットを転送するルータ

- パケットの経路を提供する
- IPパケットを次のルータに送るだけ
  - ルーティングテーブルで次の送り先を決める

